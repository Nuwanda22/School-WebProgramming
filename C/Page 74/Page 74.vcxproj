ethod==="post")){jindo.$Jindo._warn(___except.CANNOT_USE_OPTION+"\n\t"+sMethod+"-method="+oOption.method)}}}if(oOption.postBody){if(!(sType==="xhr"&&(oOption.method!=="get"))){jindo.$Jindo._warn(___except.CANNOT_USE_OPTION+"\n\t"+oOption.method+"-postBody="+oOption.postBody)
}}var oTypeProperty={xhr:"onload|timeout|ontimeout|onerror|async|method|postBody|type",jsonp:"onload|timeout|ontimeout|onerror|jsonp_charset|callbackid|callbackname|method|type",flash:"onload|timeout|ontimeout|onerror|sendheader|decode|method|type",iframe:"onload|proxy|method|type"};
var aName=[];var i=0;for(aName[i++] in oOption){}var sProperty=oTypeProperty[sType];for(var i=0,l=aName.length;i<l;i++){if(sProperty.indexOf(aName[i])==-1){jindo.$Jindo._warn(___except.CANNOT_USE_OPTION+"\n\t"+sType+"-"+aName[i])
}}};jindo.$Ajax.prototype._onload=(function(isIE){var ___ajax=jindo.$Ajax;var ___jindo=jindo.$Jindo;if(isIE){return function(){var status=this._request.status;var bSuccess=this._request.readyState==4&&(status==200||status==0);
var oResult;if(this._request.readyState==4){try{if((!bSuccess)&&___jindo.isFunction(this._options.onerror)){this._options.onerror(new ___ajax.Response(this._request))}else{if(!this._is_abort){oResult=this._options.onload(new ___ajax.Response(this._request))
}}}catch(e){throw e}finally{if(___jindo.isFunction(this._oncompleted)){this._oncompleted(bSuccess,oResult)}if(this._options.type=="xhr"){this.abort();try{delete this._request.onload}catch(e){this._request.onload=undefined
}}delete this._request.onreadystatechange}}}}else{return function(){var status=this._request.status;var bSuccess=this._request.readyState==4&&(status==200||status==0);var oResult;if(this._request.readyState==4){try{if((!bSuccess)&&___jindo.isFunction(this._options.onerror)){this._options.onerror(new ___ajax.Response(this._request))
}else{oResult=this._options.onload(new ___ajax.Response(this._request))}}catch(e){throw e}finally{this._status--;if(___jindo.isFunction(this._oncompleted)){this._oncompleted(bSuccess,oResult)}}}}}})(_JINDO_IS_IE);
jindo.$Ajax.prototype.request=function(oData){var ___jindo=jindo.$Jindo;var oArgs=___jindo.checkVarType(arguments,{"4voi":[],"4obj":[___jindo._F("oData:"+tHash)],"4str":["sData:"+tString]},"$Ajax#request");
this._status++;var t=this;var req=this._request;var opt=this._options;var data,v,a=[],data="";var _timer=null;var url=this._url;this._is_abort=false;var sUpType=opt.type.toUpperCase();var sUpMethod=opt.method.toUpperCase();
if(opt.postBody&&sUpType=="XHR"&&sUpMethod!="GET"){if(oArgs+""=="4str"){data=oArgs.sData}else{if(oArgs+""=="4obj"){data=jindo.$Json(oArgs.oData).toString()}else{data=null}}}else{switch(oArgs+""){case"4voi":data=null;
break;case"4obj":var oData=oArgs.oData;for(var k in oData){if(oData.hasOwnProperty(k)){v=oData[k];if(___jindo.isFunction(v)){v=v()}if(___jindo.isArray(v)||(jindo.$A&&v instanceof jindo.$A)){if(v instanceof jindo.$A){v=v._array
}for(var i=0;i<v.length;i++){a[a.length]=k+"="+encodeURIComponent(v[i])}}else{a[a.length]=k+"="+encodeURIComponent(v)}}}data=a.join("&")}}if(data&&sUpType=="XHR"&&sUpMethod=="GET"){if(url.indexOf("?")==-1){url+="?"
}else{url+="&"}url+=data;data=null}if(sUpType=="XHR"&&opt.async){req.open(sUpMethod,url,opt.async)}else{if(sUpType=="XHR"){req.open(sUpMethod,url,false)}else{req.open(sUpMethod,url)}}if(sUpType=="XHR"&&sUpMethod=="POST"){req.setRequestHeader("If-Modified-Since","Thu, 1 Jan 1970 00:00:00 GMT")
}if(sUpType=="XHR"||sUpType=="IFRAME"||(sUpType=="FLASH"&&opt.sendheader)){if(!this._headers["Content-Type"]){req.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8")}req.setRequestHeader("charset","utf-8");
if(!this._headers["X-Requested-With"]){req.setRequestHeader("X-Requested-With","XMLHttpRequest")}for(var x in this._headers){if(this._headers.hasOwnProperty(x)){if(typeof this._headers[x]=="function"){continue
}req.setRequestHeader(x,String(this._headers[x]))}}}if(req.addEventListener&&!_JINDO_IS_OP&&!_JINDO_IS_IE){if(this._loadFunc){req.removeEventListener("load",this._loadFunc,false)}this._loadFunc=function(rq){clearTimeout(_timer);
_timer=undefined;t._onload(rq)};req.addEventListener("load",this._loadFunc,false)}